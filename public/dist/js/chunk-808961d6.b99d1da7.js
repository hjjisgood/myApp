(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-808961d6"],{"1f7a":function(t,e,a){},"2dca":function(t,e,a){"use strict";var o=a("57a0"),i=a.n(o);i.a},"36e9":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"20px",overflow:"hidden"}},[a("div",{staticClass:"pull-left"},[a("Button",{attrs:{type:"primary"},on:{click:t.showModel}},[t._v("新建产品")])],1),a("div",{staticClass:"pull-right"},[a("Input",{staticStyle:{width:"auto"},attrs:{suffix:"ios-search",placeholder:"Enter text"},on:{"on-keyup":function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.getData(e):null}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}})],1)]),a("Table",{attrs:{border:"",columns:t.columns,data:t.dataList}}),a("div",{staticStyle:{"margin-top":"20px",float:"right"}},[a("Page",{attrs:{total:t.total,"show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),a("Modal",{attrs:{title:t.modalType,"mask-closable":!1,loading:t.loading},on:{"on-ok":t.ok},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[a("div",[a("Form",{ref:"Form",attrs:{model:t.formItem,"label-position":"right","label-width":100,rules:t.rules}},[a("FormItem",{attrs:{label:"产品名称",prop:"name"}},[a("Input",{model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("Input",{model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}})],1),a("FormItem",{attrs:{label:"型号",prop:"model"}},[a("Input",{model:{value:t.formItem.model,callback:function(e){t.$set(t.formItem,"model",e)},expression:"formItem.model"}})],1),a("FormItem",{attrs:{label:"图片"}},[t.imgList.length>0?a("div",[a("ImgPreview",{attrs:{width:"120",height:"120",list:t.imgList}})],1):t._e(),a("div",[a("Upload",{ref:"upload",attrs:{action:"","before-upload":t.uploadImage,format:["jpg","jpeg","png"]}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传图片")])],1)],1)])],1)],1)])],1)},i=[],r=(a("7f7f"),a("cadf"),a("551c"),a("097d"),a("9578")),n=a("f9c1"),s={name:"product-page",components:{ImgPreview:r["a"]},data:function(){var t=this;return{pageIndex:1,pageSize:10,total:0,keywords:"",modal:!1,modalType:"新增",rowId:-1,imgList:[],formItem:{name:"",type:"",model:"",image:""},loading:!0,rules:{name:[{required:!0,message:"产品名称不能为空",trigger:"blur"}],type:[{required:!0,message:"产品类型不能为空",trigger:"blur"}],model:[{required:!0,message:"产品型号不能为空",trigger:"blur"}]},columns:[{title:"产品名称",key:"name"},{title:"类型",key:"type"},{title:"型号",key:"model"},{title:"图片",key:"image",width:150,render:function(e,a){return""==a.row.image?e("div",""):e("div",[e(r["a"],{props:{weight:"30",height:"30",list:[t.imgBaseUrl+a.row.image]}})])}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"success",size:"small"},on:{click:function(){t.modalType="编辑",t.rowId=a.row.id,t.formItem={name:a.row.name,type:a.row.type,model:a.row.model,image:a.row.image},t.imgList=[t.imgBaseUrl+a.row.image],t.modal=!0}}},"编辑")])}}],dataList:[]}},mounted:function(){this.getData()},methods:{changePage:function(t){this.pageIndex=t,this.getData()},changePageSize:function(t){this.pageSize=t,this.getData()},showModel:function(){this.modalType="新增",this.modal=!0,this.imgList=[],this.formItem={name:"",type:"",model:"",image:""}},ok:function(){var t=this;this.$refs.Form.validate(function(e){e?("新增"==t.modalType?t.createProduct():t.editProduct(),t.modal=!1):(t.loading=!1,t.$nextTick(function(){t.loading=!0}))})},getData:function(){var t=this,e={pageIndex:this.pageIndex,pageSize:this.pageSize,keywords:this.keywords};Object(n["c"])(e).then(function(e){200==e.status?(t.dataList=e.data.data,t.total=e.data.total):(t.dataList=[],t.total=0)})},createProduct:function(){var t=this;Object(n["a"])(this.formItem).then(function(e){200==e.status?(t.$Message.success("新增成功"),t.getData()):t.$Message.error("服务器错误")})},editProduct:function(t){var e=this,a=this.formItem;a.id=this.rowId,Object(n["b"])(a).then(function(t){200==t.status?(e.$Message.success("编辑成功"),e.getData()):e.$Message.error("服务器错误")})},uploadImage:function(t){var e=this,a=new FormData;return a.append("file",t,t.name),Object(n["d"])(a).then(function(t){if(200==t.status){var a=e.imgBaseUrl+t.data.url;e.formItem.image=t.data.url,e.imgList=[a]}else e.$Message.error("服务器错误")}),!1}}},l=s,d=(a("2dca"),a("2877")),u=Object(d["a"])(l,o,i,!1,null,null,null);u.options.__file="product.vue";e["default"]=u.exports},"57a0":function(t,e,a){},"68bf":function(t,e,a){"use strict";var o=a("1f7a"),i=a.n(o);i.a},9578:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"hidden"}},[t._l(t.list,function(e,o){return a("div",{key:o,staticClass:"img-box"},[a("img",{style:t.getStyle,attrs:{src:e,alt:""},on:{click:function(a){t.prew(e)}}})])}),a("Modal",{attrs:{"footer-hide":!0},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("img",{attrs:{src:t.url,alt:"",width:"100%"}})])],2)},i=[],r={name:"ImgPreview",components:{},data:function(){return{modal1:!1,url:""}},props:{width:String,height:String,list:Array},computed:{getStyle:function(){return{width:this.width+"px",height:this.height+"px"}}},methods:{prew:function(t){this.url=t,this.modal1=!0}}},n=r,s=(a("68bf"),a("2877")),l=Object(s["a"])(n,o,i,!1,null,"137df848",null);l.options.__file="imgPreview.vue";var d=l.exports;e["a"]=d},f9c1:function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"a",function(){return r}),a.d(e,"b",function(){return n}),a.d(e,"d",function(){return s});var o=a("66df"),i=function(t){return o["a"].request({url:"/product/getProducts",method:"get",params:t})},r=function(t){return o["a"].request({url:"/product/createProduct",method:"post",data:t})},n=function(t){return o["a"].request({url:"/product/editProduct",method:"post",data:t})},s=function(t){return o["a"].request({url:"/upload/img",method:"post",data:t})}}}]);